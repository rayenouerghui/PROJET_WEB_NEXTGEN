<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>NextGen Tracking - PWA</title>

    <!-- PWA Meta -->
    <link rel="manifest" href="/PROJET_WEB_NEXTGEN-main/public/manifest.json">
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="/PROJET_WEB_NEXTGEN-main/public/images/icon-192.png">

    <!-- Styles -->
    <link href="css/pwa-main.css" rel="stylesheet">
    <link href="css/pwa-additions.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap"
        rel="stylesheet">

    <!-- Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
</head>

<body>
    <!-- Main Container -->
    <div id="app" class="app-container">

        <!-- Voice Button (Fixed) -->
        <button id="voice-btn" class="voice-button floating-btn" style="display: none;">
            <i class="ri-mic-line"></i>
        </button>

        <!-- Voice Indicator -->
        <div id="voice-indicator" class="voice-indicator" style="display: none;"></div>

        <!-- Main Views -->
        <div id="main-view" class="main-view">
            <header class="app-header">
                <div class="header-content">
                    <h1>üöÄ NextGen Tracking</h1>
                    <p>Suivi intelligent de vos livraisons</p>
                </div>
            </header>

            <!-- Dashboard -->
            <div class="dashboard">
                <div class="quick-actions">
                    <button onclick="app.activateVoiceControl()" class="action-card">
                        <i class="ri-mic-line"></i>
                        <span>Commande Vocale</span>
                        <small>Parlez pour contr√¥ler</small>
                    </button>
                    <button onclick="app.activate3DView()" class="action-card">
                        <i class="ri-3d-line"></i>
                        <span>Vue 3D</span>
                        <small>Route cin√©matique</small>
                    </button>
                    <button onclick="app.activateCameraView()" class="action-card">
                        <i class="ri-camera-line"></i>
                        <span>Aper√ßu Colis</span>
                        <small>Dimensions AR</small>
                    </button>
                </div>

                <div id="orders-list" class="orders-list">
                    <div class="loading-spinner">
                        <div class="spinner"></div>
                        <p>Chargement des livraisons...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 3D View Container -->
        <div id="3d-view" class="view-container" style="display: none;">
            <div id="3d-container"></div>
            <div class="view-controls">
                <button onclick="app.close3DView()" class="btn-close">
                    <i class="ri-close-line"></i> Fermer
                </button>
            </div>
        </div>

        <!-- Camera View Container -->
        <div id="camera-view" class="view-container" style="display: none;">
            <div id="camera-container"></div>
            <div id="camera-controls"></div>
            <div class="camera-instructions">
                <p>üì± Pointez votre cam√©ra vers votre porte</p>
                <p>üì¶ Visualisez la taille approximative du colis</p>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/modules/voice-controller.js"></script>
    <script src="js/modules/3d-scene.js"></script>
    <script src="js/modules/camera-viewer.js"></script>
    <script src="js/utils/api-client.js"></script>
    <script src="js/app.js"></script>

    <script>
        // PWA Installation
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/PROJET_WEB_NEXTGEN-main/public/sw.js')
                .then(reg => console.log('‚úÖ Service Worker registered'))
                .catch(err => console.error('‚ùå SW registration failed:', err));
        }
    </script>
</body>

</html>